<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Erken Emeklilik HesaplayÄ±cÄ±</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ’¸</text></svg>">
  <meta name="description" content="AylÄ±k harcama hedefi, SWR, sigorta fonu, Ã§ok varlÄ±klÄ± daÄŸÄ±lÄ±m, esnek katkÄ± takvimi, post-FI Ã§alÄ±ÅŸma, Ã§ekim testi, max sÃ¼rdÃ¼rÃ¼lebilir Ã§ekim, CAGR/IRR.">
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <header class="container">
    <h1>Erken Emeklilik HesaplayÄ±cÄ±</h1>
    <p class="muted">
      Emeklilikte <strong>aylÄ±k harcama hedefi</strong> (bugÃ¼nÃ¼n parasÄ±yla) â€¢ <strong>SWR</strong> â€¢
      <strong>Sigorta fonu</strong> â€¢ <strong>Ã‡ok varlÄ±klÄ± daÄŸÄ±lÄ±m</strong> (Gayrimenkul/Hisse/Kripto/Emtia/Eurobond) â€¢
      <strong>Esnek katkÄ± takvimi</strong> â€¢ <strong>Post-FI Ã§alÄ±ÅŸma</strong> â€¢
      <strong>Ã‡ekim & GÃ¼venlik Testi</strong> â€¢ <strong>Maks. AylÄ±k Ã‡ekim</strong> â€¢
      <strong>CSV</strong> â€¢ <strong>TWR CAGR/IRR</strong>
    </p>
  </header>

  <main class="container grid">
    <section class="card">
      <h2>Parametreler</h2>
      <form id="calc-form">
        <fieldset>
          <legend>Emeklilik HarcamasÄ± & SWR</legend>
          <div class="row">
            <label for="monthly_spending_today">Emeklilikte aylÄ±k harcama (bugÃ¼nÃ¼n parasÄ±yla)</label>
            <input id="monthly_spending_today" type="number" min="0" step="0.01" value="3000" required>
          </div>
          <div class="row">
            <label for="passive_income_today">AylÄ±k pasif gelir (bugÃ¼nÃ¼n parasÄ±yla)</label>
            <input id="passive_income_today" type="number" min="0" step="0.01" value="0">
          </div>
          <div class="row">
            <label for="swr">SÃ¼rdÃ¼rÃ¼lebilir Ã§ekim oranÄ± (SWR, %)</label>
            <input id="swr" type="number" min="0.1" max="10" step="0.1" value="4" required>
          </div>
          <div class="row">
            <label for="inflation">Enflasyon (yÄ±llÄ±k, %)</label>
            <input id="inflation" type="number" min="0" step="0.1" value="2">
          </div>
        </fieldset>

        <fieldset>
          <legend>Sigorta / GÃ¼venlik Fonu</legend>
          <div class="row"><label for="start_capital_ins">BaÅŸlangÄ±Ã§ tutarÄ±</label><input id="start_capital_ins" type="number" min="0" step="0.01" value="5000"></div>
          <div class="row"><label for="contrib_ins">AylÄ±k katkÄ± (varsayÄ±lan)</label><input id="contrib_ins" type="number" min="0" step="0.01" value="300"></div>
          <div class="row"><label for="target_ins_today">Hedef tutar (bugÃ¼nÃ¼n parasÄ±yla)</label><input id="target_ins_today" type="number" min="0" step="0.01" value="20000"></div>
          <div class="row"><label for="return_ins">YÄ±llÄ±k getiri (%, sigorta)</label><input id="return_ins" type="number" min="-50" step="0.1" value="3"></div>
          <div class="row checkbox-row">
            <input id="redirect_after_ins" type="checkbox" checked>
            <label for="redirect_after_ins">Sigorta hedefe ulaÅŸÄ±nca aylÄ±k katkÄ±yÄ± emeklilik portfÃ¶yÃ¼ne aktar</label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Emeklilik PortfÃ¶yÃ¼ (Toplam)</legend>
          <div class="row"><label for="start_capital_ret">BaÅŸlangÄ±Ã§ sermayesi (toplam)</label><input id="start_capital_ret" type="number" min="0" step="0.01" value="20000"></div>
          <div class="row"><label for="contrib_ret">AylÄ±k katkÄ± (varsayÄ±lan)</label><input id="contrib_ret" type="number" min="0" step="0.01" value="1000"></div>
          <div class="row"><label for="contrib_growth">AylÄ±k katkÄ± yÄ±llÄ±k artÄ±ÅŸÄ± (%)</label><input id="contrib_growth" type="number" min="0" step="0.1" value="0"></div>
          <div class="row"><label for="max_years">SimÃ¼lasyon ufku (yÄ±l)</label><input id="max_years" type="number" min="1" max="100" step="1" value="60"></div>
        </fieldset>

        <fieldset>
          <legend>Esnek KatkÄ± Takvimi (Opsiyonel)</legend>
          <p class="small muted">Ã–r: â€œ0â€“4 yÄ±l ayda 1000 â‚¬, 5â€“9 yÄ±l 1500 â‚¬ â€¦â€ SatÄ±r ekle ve doldur.</p>
          <div class="sched">
            <h4>Emeklilik PortfÃ¶yÃ¼</h4>
            <table class="tbl">
              <thead><tr><th>BaÅŸlangÄ±Ã§ yÄ±lÄ±</th><th>BitiÅŸ yÄ±lÄ± (dahil)</th><th>AylÄ±k katkÄ± (â‚¬)</th><th></th></tr></thead>
              <tbody id="ret-sched-body"></tbody>
            </table>
            <button type="button" class="secondary" id="add-ret-row">SatÄ±r ekle</button>
          </div>
          <div class="sched">
            <h4>Sigorta Fonu</h4>
            <table class="tbl">
              <thead><tr><th>BaÅŸlangÄ±Ã§ yÄ±lÄ±</th><th>BitiÅŸ yÄ±lÄ± (dahil)</th><th>AylÄ±k katkÄ± (â‚¬)</th><th></th></tr></thead>
              <tbody id="ins-sched-body"></tbody>
            </table>
            <button type="button" class="secondary" id="add-ins-row">SatÄ±r ekle</button>
          </div>
          <p class="small muted">Not: Takvim varsa, o yÄ±llar iÃ§in â€œvarsayÄ±lanâ€ katkÄ±larÄ±n yerine geÃ§er.</p>
        </fieldset>

        <fieldset>
          <legend>VarlÄ±k DaÄŸÄ±lÄ±mÄ± (Emeklilik PortfÃ¶yÃ¼ iÃ§inde)</legend>
          <div class="row">
            <label for="alloc_mode">DaÄŸÄ±lÄ±m modu</label>
            <select id="alloc_mode">
              <option value="percent" selected>YÃ¼zde</option>
              <option value="amount">Miktar</option>
            </select>
          </div>

          <div class="grid grid-2">
            <div>
              <h4>Gayrimenkul</h4>
              <div class="row alloc percent"><label for="w_re">AÄŸÄ±rlÄ±k (%)</label><input id="w_re" type="number" step="0.1" value="20"></div>
              <div class="row alloc amount hidden"><label for="a0_re">BaÅŸlangÄ±Ã§ (EUR)</label><input id="a0_re" type="number" step="0.01" value="4000"></div>
              <div class="row alloc amount hidden"><label for="ac_re">AylÄ±k katkÄ± (EUR)</label><input id="ac_re" type="number" step="0.01" value="200"></div>
              <div class="row"><label for="r_re">YÄ±llÄ±k getiri (%)</label><input id="r_re" type="number" step="0.1" value="5"></div>
            </div>
            <div>
              <h4>Hisse</h4>
              <div class="row alloc percent"><label for="w_eq">AÄŸÄ±rlÄ±k (%)</label><input id="w_eq" type="number" step="0.1" value="40"></div>
              <div class="row alloc amount hidden"><label for="a0_eq">BaÅŸlangÄ±Ã§ (EUR)</label><input id="a0_eq" type="number" step="0.01" value="8000"></div>
              <div class="row alloc amount hidden"><label for="ac_eq">AylÄ±k katkÄ± (EUR)</label><input id="ac_eq" type="number" step="0.01" value="400"></div>
              <div class="row"><label for="r_eq">YÄ±llÄ±k getiri (%)</label><input id="r_eq" type="number" step="0.1" value="7"></div>
            </div>
            <div>
              <h4>Kripto</h4>
              <div class="row alloc percent"><label for="w_cr">AÄŸÄ±rlÄ±k (%)</label><input id="w_cr" type="number" step="0.1" value="15"></div>
              <div class="row alloc amount hidden"><label for="a0_cr">BaÅŸlangÄ±Ã§ (EUR)</label><input id="a0_cr" type="number" step="0.01" value="3000"></div>
              <div class="row alloc amount hidden"><label for="ac_cr">AylÄ±k katkÄ± (EUR)</label><input id="ac_cr" type="number" step="0.01" value="150"></div>
              <div class="row"><label for="r_cr">YÄ±llÄ±k getiri (%)</label><input id="r_cr" type="number" step="0.1" value="15"></div>
            </div>
            <div>
              <h4>Emtia</h4>
              <div class="row alloc percent"><label for="w_cm">AÄŸÄ±rlÄ±k (%)</label><input id="w_cm" type="number" step="0.1" value="10"></div>
              <div class="row alloc amount hidden"><label for="a0_cm">BaÅŸlangÄ±Ã§ (EUR)</label><input id="a0_cm" type="number" step="0.01" value="2000"></div>
              <div class="row alloc amount hidden"><label for="ac_cm">AylÄ±k katkÄ± (EUR)</label><input id="ac_cm" type="number" step="0.01" value="100"></div>
              <div class="row"><label for="r_cm">YÄ±llÄ±k getiri (%)</label><input id="r_cm" type="number" step="0.1" value="4"></div>
            </div>
            <div>
              <h4>Eurobond</h4>
              <div class="row alloc percent"><label for="w_eb">AÄŸÄ±rlÄ±k (%)</label><input id="w_eb" type="number" step="0.1" value="15"></div>
              <div class="row alloc amount hidden"><label for="a0_eb">BaÅŸlangÄ±Ã§ (EUR)</label><input id="a0_eb" type="number" step="0.01" value="3000"></div>
              <div class="row alloc amount hidden"><label for="ac_eb">AylÄ±k katkÄ± (EUR)</label><input id="ac_eb" type="number" step="0.01" value="150"></div>
              <div class="row"><label for="r_eb">YÄ±llÄ±k getiri (%)</label><input id="r_eb" type="number" step="0.1" value="6"></div>
            </div>
          </div>
          <p class="small muted">YÃ¼zde modunda toplam %100 olmalÄ±. Miktar modunda toplamlar â€œtoplam baÅŸlangÄ±Ã§/katkÄ±â€ ile uyumlu olmalÄ±.</p>
        </fieldset>

        <fieldset>
          <legend>Emeklilik SonrasÄ± Ã‡alÄ±ÅŸma (Post-FI)</legend>
          <div class="row"><label for="post_work_years">FI sonrasÄ± Ã§alÄ±ÅŸma sÃ¼resi (yÄ±l)</label><input id="post_work_years" type="number" min="0" step="1" value="0"></div>
          <div class="row"><label for="post_work_contrib">Bu sÃ¼rede portfÃ¶ye aylÄ±k net katkÄ± (â‚¬)</label><input id="post_work_contrib" type="number" min="0" step="0.01" value="0"></div>
        </fieldset>

        <fieldset>
          <legend>Emeklilik Ã‡ekim & GÃ¼venlik Testi</legend>
          <div class="row checkbox-row">
            <input id="enable_drawdown" type="checkbox">
            <label for="enable_drawdown">FI (ve varsa Post-FI) sonrasÄ± Ã§ekim simÃ¼lasyonunu Ã§alÄ±ÅŸtÄ±r</label>
          </div>
          <div class="row"><label for="dd_horizon">Ã‡ekim ufku (yÄ±l)</label><input id="dd_horizon" type="number" min="1" step="1" value="35"></div>
          <div class="row"><label for="dd_index_infl">Enflasyona endeksli Ã§ekim</label>
            <select id="dd_index_infl">
              <option value="yes" selected>Evet (gerÃ§ek alÄ±m gÃ¼cÃ¼ sabit)</option>
              <option value="no">HayÄ±r (nominal sabit tutar)</option>
            </select>
          </div>
          <div class="row"><label for="dd_withdraw_today">AylÄ±k Ã§ekim (bugÃ¼nÃ¼n parasÄ±yla) â€” boÅŸ bÄ±rakÄ±rsan maksimumu bulurum</label><input id="dd_withdraw_today" type="number" min="0" step="0.01" placeholder="Ã–rn. 2500"></div>
          <div class="row"><label for="dd_return_mode">Ã‡ekim dÃ¶nemi beklenen getiri</label>
            <select id="dd_return_mode">
              <option value="auto" selected>Otomatik (son daÄŸÄ±lÄ±mdan aÄŸÄ±rlÄ±k ort.)</option>
              <option value="manual">Manuel gir</option>
            </select>
          </div>
          <div class="row"><label for="dd_return_manual">Manuel yÄ±llÄ±k getiri (%)</label><input id="dd_return_manual" type="number" step="0.1" value="5"></div>
          <div class="row"><label for="dd_stress">Stres testi (getiriden puan dÃ¼ÅŸ)</label><input id="dd_stress" type="number" step="0.5" value="2"></div>
          <p class="small muted">SonuÃ§larda: sÃ¼rdÃ¼rÃ¼lebilirlik ve (boÅŸ bÄ±rakÄ±rsan) **maks. sÃ¼rdÃ¼rÃ¼lebilir aylÄ±k Ã§ekim** (bugÃ¼nÃ¼n parasÄ±yla) + stres senaryosu raporlanÄ±r.</p>
        </fieldset>

        <div class="actions">
          <button type="submit" class="primary">Hesapla</button>
          <button type="button" id="reset-btn" class="ghost">SÄ±fÄ±rla</button>
        </div>
      </form>
    </section>

    <section class="card">
      <h2>SonuÃ§lar</h2>
      <div id="summary" class="summary"></div>
      <canvas id="chart" height="280" aria-label="Grafik"></canvas>
      <div class="actions">
        <button id="download-csv" class="secondary" disabled>CSV Ä°ndir</button>
        <button id="share-link" class="ghost" disabled>Link OluÅŸtur</button>
      </div>
      <details class="mt">
        <summary>Hesaplama NotlarÄ±</summary>
        <ul>
          <li>Gereken emeklilik portfÃ¶yÃ¼ (reel): <em>(Harcama âˆ’ Pasif) Ã— 12 / SWR</em>.</li>
          <li>Nominale dÃ¶nÃ¼ÅŸÃ¼m: enflasyonun aylÄ±ÄŸa indirgenmesi. PortfÃ¶yler aylÄ±k bileÅŸir.</li>
          <li>VarlÄ±k katkÄ±larÄ± daÄŸÄ±lÄ±ma gÃ¶re eklenir (otomatik rebalance yok).</li>
          <li>Post-FI sÃ¼rede (varsa) Ã§ekim yok; sadece belirtilen katkÄ± bÃ¼yÃ¼tÃ¼r; ardÄ±ndan Ã§ekim simÃ¼lasyonu baÅŸlar.</li>
          <li>Getiri metrikleri: <strong>TWR CAGR</strong> (zaman aÄŸÄ±rlÄ±klÄ±) ve <strong>IRR (XIRR)</strong> (para aÄŸÄ±rlÄ±klÄ±).</li>
          <li>Ã‡ekim testi: ufuk boyunca bakiye negatife dÃ¼ÅŸmezse sÃ¼rdÃ¼rÃ¼lebilir kabul edilir. Maks Ã§ekim ikili arama ile bulunur.</li>
        </ul>
      </details>
    </section>
  </main>

  <footer class="container muted small">
    Â© 2025 â€” MIT LisansÄ±. GitHub Pages ile yayÄ±nlanabilir.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/script.js"></script>
</body>
</html>
